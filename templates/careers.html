{% extends "base.html" %}
{% block title %}Careers{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Alumni Careers</h2>
    {% if session.get('admin_logged_in') %}
      <a href="{{ url_for('add_career') }}" class="btn btn-primary">Add Career</a>
    {% endif %}
</div>

<div class="table-responsive">
    <table class="table table-striped table-hover shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>Alumni</th>
          <th>Company</th>
          <th>Position</th>
          <th>Start</th>
          <th>End</th>
          {% if session.get('admin_logged_in') %}
            <th>Actions</th>
          {% endif %}
        </tr>
      </thead>
      <tbody>
        {% for career in careers %}
        <tr>
          <td>{{ career.first_name }} {{ career.last_name }}</td>
          <td>{{ career.company_name }}</td>
          <td>{{ career.position }}</td>
          <td>{{ career.start_date }}</td>
          <td>{{ career.end_date or 'Present' }}</td>
          
          {% if session.get('admin_logged_in') %}
          <td class="text-nowrap">
            <a href="{{ url_for('edit_career', career_id=career.career_id) }}" class="text-decoration-none fw-bold me-3">Edit</a>

            <form action="{{ url_for('delete_career', career_id=career.career_id) }}" method="post" 
                  style="display: inline-block !important; background: transparent !important; box-shadow: none !important; padding: 0 !important; margin: 0 !important; border: none !important; width: auto !important; max-width: none !important;">
                <button type="submit" class="btn btn-link text-danger p-0 text-decoration-none fw-bold" onclick="return confirm('Delete this career?');">Delete</button>
            </form>
          </td>
          {% endif %}
        </tr>
        {% else %}
        <tr>
            <td colspan="6" class="text-center">No careers found. Please add one.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
</div>
{% endblock %}